<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>变量1 | 程序员加文</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="favicon.ico">
    <meta name="description" content="程序员加文的Java技术学习分享网站">
    
    <link rel="preload" href="/cs/assets/css/0.styles.3da77e5f.css" as="style"><link rel="preload" href="/cs/assets/js/app.3833f9ea.js" as="script"><link rel="preload" href="/cs/assets/js/2.3dc1b8de.js" as="script"><link rel="preload" href="/cs/assets/js/1.54be531d.js" as="script"><link rel="preload" href="/cs/assets/js/22.7b484c1b.js" as="script"><link rel="prefetch" href="/cs/assets/js/10.563984b0.js"><link rel="prefetch" href="/cs/assets/js/11.c389195a.js"><link rel="prefetch" href="/cs/assets/js/12.81539b0f.js"><link rel="prefetch" href="/cs/assets/js/13.21c635b9.js"><link rel="prefetch" href="/cs/assets/js/14.37ef2a72.js"><link rel="prefetch" href="/cs/assets/js/15.5542c093.js"><link rel="prefetch" href="/cs/assets/js/16.d48fd1ce.js"><link rel="prefetch" href="/cs/assets/js/17.bd8d538c.js"><link rel="prefetch" href="/cs/assets/js/18.6d3b94c1.js"><link rel="prefetch" href="/cs/assets/js/19.eb35cfee.js"><link rel="prefetch" href="/cs/assets/js/20.7d8a0e52.js"><link rel="prefetch" href="/cs/assets/js/21.db1b5d88.js"><link rel="prefetch" href="/cs/assets/js/23.37dd5e12.js"><link rel="prefetch" href="/cs/assets/js/24.b0fcefbf.js"><link rel="prefetch" href="/cs/assets/js/25.39c9b679.js"><link rel="prefetch" href="/cs/assets/js/26.ac34285f.js"><link rel="prefetch" href="/cs/assets/js/27.b46debc5.js"><link rel="prefetch" href="/cs/assets/js/28.b85af783.js"><link rel="prefetch" href="/cs/assets/js/29.4ef018b1.js"><link rel="prefetch" href="/cs/assets/js/3.5322f14a.js"><link rel="prefetch" href="/cs/assets/js/30.993eb757.js"><link rel="prefetch" href="/cs/assets/js/31.531d8767.js"><link rel="prefetch" href="/cs/assets/js/32.89255c8b.js"><link rel="prefetch" href="/cs/assets/js/33.b8f4cef1.js"><link rel="prefetch" href="/cs/assets/js/34.263694d3.js"><link rel="prefetch" href="/cs/assets/js/35.6cc43691.js"><link rel="prefetch" href="/cs/assets/js/36.f36ea129.js"><link rel="prefetch" href="/cs/assets/js/37.e7d013d3.js"><link rel="prefetch" href="/cs/assets/js/38.2836e84c.js"><link rel="prefetch" href="/cs/assets/js/4.84e1e480.js"><link rel="prefetch" href="/cs/assets/js/5.f0541060.js"><link rel="prefetch" href="/cs/assets/js/6.dfb06aa0.js"><link rel="prefetch" href="/cs/assets/js/7.7551a9fb.js"><link rel="prefetch" href="/cs/assets/js/vendors~docsearch.5e19b665.js">
    <link rel="stylesheet" href="/cs/assets/css/0.styles.3da77e5f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/cs/" class="home-link router-link-active"><img src="/cs/logo.png" alt="程序员加文" class="logo"> <span class="site-name can-hide">程序员加文</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/cs/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/cs/计算机基础/数据库/面试题/基础/数据库.html" class="nav-link">
  面试题
</a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/cs/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/cs/计算机基础/数据库/面试题/基础/数据库.html" class="nav-link">
  面试题
</a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Java 基础语法</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cs/Java/基础语法/1变量.html" class="active sidebar-link">变量</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cs/Java/基础语法/1变量.html#变量类型" class="sidebar-link">变量类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cs/Java/基础语法/1变量.html#变量命名" class="sidebar-link">变量命名</a></li><li class="sidebar-sub-header"><a href="/cs/Java/基础语法/1变量.html#基本数据类型" class="sidebar-link">基本数据类型</a></li></ul></li><li class="sidebar-sub-header"><a href="/cs/Java/基础语法/1变量.html#浮点数精度丢失" class="sidebar-link">浮点数精度丢失</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cs/Java/基础语法/1变量.html#_1、java-中-double-类型操作精度丢失问题" class="sidebar-link">1、Java 中 double 类型操作精度丢失问题</a></li><li class="sidebar-sub-header"><a href="/cs/Java/基础语法/1变量.html#_2、bigdecimal-类基本介绍" class="sidebar-link">2、BigDecimal 类基本介绍</a></li><li class="sidebar-sub-header"><a href="/cs/Java/基础语法/1变量.html#_3、浮点数精度丢失的解决方案" class="sidebar-link">3、浮点数精度丢失的解决方案</a></li><li class="sidebar-sub-header"><a href="/cs/Java/基础语法/1变量.html#比较bigdecimal" class="sidebar-link">比较BigDecimal</a></li><li class="sidebar-sub-header"><a href="/cs/Java/基础语法/1变量.html#总结" class="sidebar-link">总结</a></li></ul></li><li class="sidebar-sub-header"><a href="/cs/Java/基础语法/1变量.html#转义字符" class="sidebar-link">转义字符</a></li></ul></li><li><a href="/cs/Java/基础语法/2运算符.html" class="sidebar-link">运算符</a></li><li><a href="/cs/Java/基础语法/3控制语句.html" class="sidebar-link">控制语句</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>反射</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="变量1"><a href="#变量1" class="header-anchor">#</a> 变量1</h1> <p>variable</p> <h2 id="变量类型"><a href="#变量类型" class="header-anchor">#</a> 变量类型</h2> <ul><li><p><strong>实例变量(非静态字段)</strong></p> <p>Instance Variables (Non-Static Fields)</p> <p>类的非静态属性</p></li> <li><p><strong>类变量(静态字段)</strong></p> <p>Class Variables (Static Fields)</p> <p>类的静态属性</p></li> <li><p><strong>局部变量</strong></p> <p>Local Variables</p></li> <li><p><strong>参数</strong></p> <p>Parameters</p></li></ul> <p>成员变量和局部变量的区别？</p> <ul><li><strong>语法形式</strong>：从语法形式上看，成员变量是属于类的，而局部变量是在代码块或方法中定义的变量或是方法的参数；成员变量可以被 <code>public</code>,<code>private</code>,<code>static</code> 等修饰符所修饰，而局部变量不能被访问控制修饰符及 <code>static</code> 所修饰；但是，成员变量和局部变量都能被 <code>final</code> 所修饰。</li> <li><strong>存储方式</strong>：从变量在内存中的存储方式来看，如果成员变量是使用 <code>static</code> 修饰的，那么这个成员变量是属于类的，如果没有使用 <code>static</code> 修饰，这个成员变量是属于实例的。而对象存在于堆内存，局部变量则存在于栈内存。</li> <li><strong>生存时间</strong>：从变量在内存中的生存时间上看，成员变量是对象的一部分，它随着对象的创建而存在，而局部变量随着方法的调用而自动生成，随着方法的调用结束而消亡。</li> <li><strong>默认值</strong>：从变量是否有默认值来看，成员变量如果没有被赋初始值，则会自动以类型的默认值而赋值（一种情况例外:被 <code>final</code> 修饰的成员变量也必须显式地赋值），而局部变量则不会自动赋值,如果不赋值就使用，会出现编译时异常，不能通过编译。
<img src="https://obs-knowledge.oss-cn-beijing.aliyuncs.com/img/20230809152144.png" alt="image.png"></li></ul> <h3 id="变量命名"><a href="#变量命名" class="header-anchor">#</a> 变量命名</h3> <ul><li><p>大小写敏感</p></li> <li><p>开头：<strong>字母</strong>或$或下划线</p> <blockquote><p>一般不使用$,系统使用</p> <p>一般也不使用_</p></blockquote> <p>非开头：字母或数字或下划线或$</p></li> <li><p>不能是关键字或保留字
<img src="https://obs-knowledge.oss-cn-beijing.aliyuncs.com/img/20231013102253.png" alt="image.png"></p></li> <li><p>一般用小驼峰命名法：第一个单词首字母小写，其余的单词首字母大写</p></li> <li><p>对于常量：每个字母都大写，单词之间用_ 分割</p></li></ul> <h3 id="基本数据类型"><a href="#基本数据类型" class="header-anchor">#</a> 基本数据类型</h3> <p>Java 编程语言是静态类型的，这意味着在使用所有变量之前必须首先声明它们。这需要声明变量的类型和名称</p> <p>变量的数据类型决定了它可能包含的值，以及可能对它执行的操作。</p> <p>8<strong>种基本数据类型</strong></p> <p><img src="https://obs-knowledge.oss-cn-beijing.aliyuncs.com/img/20230809153155.png" alt="image.png"></p> <p>属性是有默认值的，但是局部变量没有默认值</p> <blockquote><p>可以在数值文本中添加下划线</p> <p>exemaple:float pi =  3.14_15F;为了数字的可读性</p></blockquote> <h2 id="浮点数精度丢失"><a href="#浮点数精度丢失" class="header-anchor">#</a> 浮点数精度丢失</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>  
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    <span class="token keyword">double</span> a <span class="token operator">=</span> <span class="token number">2.0f</span> <span class="token operator">-</span> <span class="token number">1.9f</span><span class="token punctuation">;</span>  
    <span class="token keyword">double</span> b <span class="token operator">=</span> <span class="token number">1.8f</span> <span class="token operator">-</span> <span class="token number">1.7f</span><span class="token punctuation">;</span>  
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 0.100000024  </span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 0.099999905  </span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a <span class="token operator">==</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// false  </span>
<span class="token punctuation">}</span>
</code></pre></div><p>为什么会出现这个问题呢？</p> <p>这个和计算机保存浮点数的机制有很大关系。我们知道计算机是二进制的，而且计算机在表示一个数字时，宽度是有限的，无限循环的小数存储在计算机时，只能被截断，所以就会导致小数精度发生损失的情况。这也就是解释了为什么浮点数没有办法用二进制精确表示。</p> <p><a href="https://zhuanlan.zhihu.com/p/164568001" target="_blank" rel="noopener noreferrer">Java 中浮点数的精度丢失问题以及解决方案 - 知乎 (zhihu.com)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="_1、java-中-double-类型操作精度丢失问题"><a href="#_1、java-中-double-类型操作精度丢失问题" class="header-anchor">#</a> 1、Java 中 double 类型操作精度丢失问题</h3> <p>在使用 Java 中 double 进行运算时，经常出现精度丢失的问题，总是在一个正确的结果左右偏 0.0000**1。</p> <blockquote><p>先来看 Java 中 double 类型数值加、减、乘、除计算式实例：</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token number">0.06</span><span class="token operator">+</span><span class="token number">0.01</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token operator">-</span><span class="token number">0.42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token number">4.015</span><span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token number">303.1</span><span class="token operator">/</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>运行结果：</p></blockquote> <p><img src="https://pic4.zhimg.com/80/v2-094e20a1690e1bb9a83b5e8776e290ef_1440w.webp" alt=""></p> <p>我们发现，计算出来的值和我们预期结果不一致。<strong>原因在于</strong>我们的计算机是二进制的。浮点数没有办法使用二进制进行精确表示。</p> <p>计算机的 CPU 表示浮点数由两个部分组成：指数和尾数，这样的表示方法一般都会失去一定的精确度，有些浮点数运算也会产生一定的误差。</p> <p>浮点运算很少是精确的，只要是超过精度能表示的范围就会产生误差。往往产生误差不是因为数的大小，而是因为数的精度。因此，产生的结果接近但不等于想要的结果。尤其在使用 float 和 double 作精确运算的时候要特别小心。</p> <h3 id="_2、bigdecimal-类基本介绍"><a href="#_2、bigdecimal-类基本介绍" class="header-anchor">#</a> 2、<strong>BigDecimal 类基本介绍</strong></h3> <p>那么我们如何才能够获取我们想要的预期结果呢？特别是在处理金额交易计算上。</p> <p>其实 Java 的浮点数只能用来进行科学计算或工程计算，在大多数的商业计算中，一般采用<strong>java.math.BigDecimal</strong> 类来进行精确计算。</p> <blockquote><p>使用步骤：</p></blockquote> <ol><li>用 float 或者 double 变量构建 BigDecimal 对象。通常使用 BigDecimal 的构造方法或者静态方法的 valueOf() 方法把基本类型的变量构建成 BigDecimal 对象。</li> <li>通过调用 BigDecimal 的加，减，乘，除等相应的方法进行算术运算。</li> <li>把 BigDecimal 对象转换成 float，double，int 等类型。</li></ol> <blockquote><p><strong>BigDecimal 类</strong> 的构造函数：</p></blockquote> <div class="language-text extra-class"><pre class="language-text"><code>BigDecimal(int var)  //创建一个具有参数所指定整数值的对象。
BigDecimal(double var) //创建一个具有参数所指定双精度值的对象。
BigDecimal(long var)  //创建一个具有参数所指定长整数值的对象。
BigDecimal(String var) //创建一个具有参数所指定以字符串表示的数值的对象。
</code></pre></div><blockquote><p><strong>BigDecimal 类</strong>的加，减，乘，除等相应的方法：</p></blockquote> <div class="language-text extra-class"><pre class="language-text"><code>BigDecimal add(BigDecimal augend)  //加法运算
BigDecimal subtract(BigDecimal subtrahend) //减法运算
BigDecimal multiply(BigDecimal multiplicand) //乘法运算
BigDecimal divide(BigDecimal divisor) //除法运算
</code></pre></div><p><em><strong>注：详情可参考API或是查看源码</strong></em></p> <h3 id="_3、浮点数精度丢失的解决方案"><a href="#_3、浮点数精度丢失的解决方案" class="header-anchor">#</a> 3、浮点数精度丢失的解决方案</h3> <p>既然我们知道方法了，那么我们直接套用上面的方法来解决一下上述的问题。</p> <p><strong>菜鸟误区：</strong></p> <blockquote><p>修改以上示例代码，如下：</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">double</span> d1 <span class="token operator">=</span> <span class="token number">0.06</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> d2 <span class="token operator">=</span> <span class="token number">0.01</span><span class="token punctuation">;</span>
        <span class="token class-name">BigDecimal</span> b1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span>d1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BigDecimal</span> b2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span>d2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>b1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>b2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doubleValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">double</span> d3 <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> d4 <span class="token operator">=</span> <span class="token number">0.42</span><span class="token punctuation">;</span>
        <span class="token class-name">BigDecimal</span> b3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span>d3<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BigDecimal</span> b4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span>d4<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>b3<span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span>b4<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doubleValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">double</span> d5 <span class="token operator">=</span> <span class="token number">4.015</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> d6 <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token class-name">BigDecimal</span> b5 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span>d5<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BigDecimal</span> b6 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span>d6<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>b5<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>b6<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doubleValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">double</span> d7 <span class="token operator">=</span> <span class="token number">303.1</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> d8 <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
        <span class="token class-name">BigDecimal</span> b7 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span>d7<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BigDecimal</span> b8 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span>d8<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>b7<span class="token punctuation">.</span><span class="token function">divide</span><span class="token punctuation">(</span>b8<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doubleValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>运行结果：</p></blockquote> <p><img src="https://pic1.zhimg.com/v2-e2d8e4c2cf55341e02cca23541a57060_b.jpg" alt="动图封面"></p> <p>我们发现结果还是不对。上述实例我们调用的构造方法为 BigDecimal(double var)。</p> <blockquote><p>注意：<br>
1、BigDecimal(double var) 构造方法的结果有一定的不可预知性。有人可能认为在 Java 中写入 new BigDecimal(0.1) 所创建的 BigDecimal 正好等于 0.1，但是它实际上等于 0.1000000000000000055511151231257827021181583404541015625。这是因为 0.1 无法准确地表示为 double（或者说对于该情况，不能表示为任何有限长度的二进制小数）。这样，传入到构造方法的值不会正好等于 0.1（虽然表面上等于该值）。<br>
2、BigDecimal(String var) 的 String 参数构造方法是完全可预知的：写入 new BigDecimal(&quot;0.1&quot;) 将创建一个 BigDecimal，它正好等于预期的 0.1。因此，比较而言，通常建议优先使用 String 构造方法。</p></blockquote> <p><strong>解决方案：</strong></p> <p>通过上面的示例我们发现：使用 BigDecimal(double val) 构造函数时仍会存在精度丢失问题，建议使用 BigDecimal(String val)。这就需要先把 double 转换为字符串然后在作为BigDecimal(String val) 构造函数的参数。转换为 BigDecimal 对象之后再进行加减乘除操作，这样精度就不会出现问题了。</p> <blockquote><p>正确的解决示例修改代码：</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">double</span> d1 <span class="token operator">=</span> <span class="token number">0.06</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> d2 <span class="token operator">=</span> <span class="token number">0.01</span><span class="token punctuation">;</span>
        <span class="token class-name">BigDecimal</span> b1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>d1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BigDecimal</span> b2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>d2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>b1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>b2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doubleValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">double</span> d3 <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> d4 <span class="token operator">=</span> <span class="token number">0.42</span><span class="token punctuation">;</span>
        <span class="token class-name">BigDecimal</span> b3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>d3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BigDecimal</span> b4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>d4<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>b3<span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span>b4<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doubleValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">double</span> d5 <span class="token operator">=</span> <span class="token number">4.015</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> d6 <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token class-name">BigDecimal</span> b5 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>d5<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BigDecimal</span> b6 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>d6<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>b5<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>b6<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doubleValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">double</span> d7 <span class="token operator">=</span> <span class="token number">303.1</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> d8 <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
        <span class="token class-name">BigDecimal</span> b7 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>d7<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BigDecimal</span> b8 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>d8<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>b7<span class="token punctuation">.</span><span class="token function">divide</span><span class="token punctuation">(</span>b8<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doubleValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>运行结果：<strong>计算精度正确</strong></p></blockquote> <p><img src="https://pic1.zhimg.com/v2-4beed5827b8b3244328070fed3ea7c9c_b.jpg" alt="动图封面"></p> <h3 id="比较bigdecimal"><a href="#比较bigdecimal" class="header-anchor">#</a> 比较BigDecimal</h3> <p>在比较两个<code>BigDecimal</code>的值是否相等时，要特别注意，使用<code>equals()</code>方法不但要求两个<code>BigDecimal</code>的值相等，还要求它们的<code>scale()</code>相等：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">BigDecimal</span> d1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token string">&quot;123.456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">BigDecimal</span> d2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token string">&quot;123.45600&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>d1<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>d2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false,因为scale不同</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>d1<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>d2<span class="token punctuation">.</span><span class="token function">stripTrailingZeros</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true,因为d2去除尾部0后scale变为3</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>d1<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>d2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
</code></pre></div><p>必须使用<code>compareTo()</code>方法来比较，它根据两个值的大小分别返回负数、正数和<code>0</code>，分别表示小于、大于和等于。</p> <p>总是使用compareTo()比较两个BigDecimal的值，不要使用equals()！</p> <p>如果查看<code>BigDecimal</code>的源码，可以发现，实际上一个<code>BigDecimal</code>是通过一个<code>BigInteger</code>和一个<code>scale</code>来表示的，即<code>BigInteger</code>表示一个完整的整数，而<code>scale</code>表示小数位数：</p> <div class="language- extra-class"><pre class="language-text"><code>public class BigDecimal extends Number implements Comparable&lt;BigDecimal&gt; {
    private final BigInteger intVal;
    private final int scale;
}
</code></pre></div><p><code>BigDecimal</code>也是从<code>Number</code>继承的，也是不可变对象。</p> <h3 id="总结"><a href="#总结" class="header-anchor">#</a> <strong>总结</strong></h3> <p>（1）需要精确的表示两位小数时我们需要把他们转换为 BigDecimal 对象，然后再进行运算。<br>
（2）使用 BigDecimal(double val) 构造函数时仍会存在精度丢失问题，建议使用 BigDecimal(String val)。
（3）
比较<code>BigDecimal</code>的值是否相等，必须使用<code>compareTo()</code>而不能使用<code>equals()</code>。</p> <h2 id="转义字符"><a href="#转义字符" class="header-anchor">#</a> 转义字符</h2> <table><thead><tr><th><strong>号</strong></th> <th><strong>字符含义</strong></th></tr></thead> <tbody><tr><td>\n</td> <td>换行 (0x0a)</td></tr> <tr><td>\r</td> <td>回车 (0x0d)</td></tr> <tr><td>\f</td> <td>换页符(0x0c)</td></tr> <tr><td>\b</td> <td>退格 (0x08)</td></tr> <tr><td>\0</td> <td>空字符 (0x0)</td></tr> <tr><td>\s</td> <td>空格 (0x20)</td></tr> <tr><td>\t</td> <td>制表符</td></tr> <tr><td>&quot;</td> <td>双引号</td></tr> <tr><td>'</td> <td>单引号</td></tr> <tr><td>\</td> <td>反斜杠</td></tr> <tr><td>\ddd</td> <td>八进制字符 (ddd)</td></tr> <tr><td>\uxxxx</td> <td>16进制Unicode字符 (xxxx)</td></tr></tbody></table> <h1 id="char为什么用两个字节"><a href="#char为什么用两个字节" class="header-anchor">#</a> char为什么用两个字节</h1> <ul><li><a href="https://www.bilibili.com/video/BV1a3411T7QU/?spm_id_from=333.788&amp;vd_source=1fe29350b37642fa583f709b9ae44b35" target="_blank" rel="noopener noreferrer">【每天一个技术点】Java 中的 char 为啥占用两个字节_哔哩哔哩_bilibili<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>Java使用的是Unicode编码，可以囊括世界上所有国家的文字,默认使用UTF-16,占2个字节，共6万多个字节，常用的够了
但是世界上的所有文字共有14万个，剩余的就要用2个char来表示，共4个字节，绰绰有余，这样的字符就必须用String来表示，不能单独赋值给一个char，会报错
而且如果要使用charAt（i),还要判断码点codePoint
<img src="https://obs-knowledge.oss-cn-beijing.aliyuncs.com/img/20230809224859.png" alt="image.png"></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/cs/Java/基础语法/2运算符.html">
        运算符
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/cs/assets/js/app.3833f9ea.js" defer></script><script src="/cs/assets/js/2.3dc1b8de.js" defer></script><script src="/cs/assets/js/1.54be531d.js" defer></script><script src="/cs/assets/js/22.7b484c1b.js" defer></script>
  </body>
</html>
